{"ast":null,"code":"import _objectSpread from\"C:/Users/varis/Downloads/react-chat-app-firebase-public-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/varis/Downloads/react-chat-app-firebase-public-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from'react';import Message from'./Message';import SendMessage from'./SendMessage';import{db}from'../firebase';import{query,collection,orderBy,onSnapshot}from'firebase/firestore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var style={main:\"flex flex-col p-[10px]\",chatContainer:{maxHeight:'400px',// Set a max height for the chat container\noverflowY:'auto'// Add a vertical scrollbar when content overflows\n}};var Chat=function Chat(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var scroll=useRef();useEffect(function(){var q=query(collection(db,'messages'),orderBy('timestamp'));var unsubscribe=onSnapshot(q,function(querySnapshot){var messages=[];querySnapshot.forEach(function(doc){messages.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id}));});setMessages(messages);});return function(){return unsubscribe();};},[]);return/*#__PURE__*/_jsxs(\"div\",{style:style.chatContainer,children:[/*#__PURE__*/_jsx(\"main\",{className:style.main,children:messages&&messages.map(function(message){return/*#__PURE__*/_jsx(Message,{message:message},message.id);})}),/*#__PURE__*/_jsx(SendMessage,{scroll:scroll}),/*#__PURE__*/_jsx(\"span\",{ref:scroll})]});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","useRef","Message","SendMessage","db","query","collection","orderBy","onSnapshot","style","main","chatContainer","maxHeight","overflowY","Chat","messages","setMessages","scroll","q","unsubscribe","querySnapshot","forEach","doc","push","data","id","map","message"],"sources":["C:/Users/varis/Downloads/react-chat-app-firebase-public-main/src/components/Chat.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Message from './Message';\nimport SendMessage from './SendMessage';\nimport { db } from '../firebase';\nimport { query, collection, orderBy, onSnapshot } from 'firebase/firestore';\n\nconst style = {\n  main: `flex flex-col p-[10px]`,\n  chatContainer: {\n    maxHeight: '400px', // Set a max height for the chat container\n    overflowY: 'auto',   // Add a vertical scrollbar when content overflows\n  },\n};\n\nconst Chat = () => {\n  const [messages, setMessages] = useState([]);\n  const scroll = useRef();\n\n  useEffect(() => {\n    const q = query(collection(db, 'messages'), orderBy('timestamp'));\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\n      let messages = [];\n      querySnapshot.forEach((doc) => {\n        messages.push({ ...doc.data(), id: doc.id });\n      });\n      setMessages(messages);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  return (\n    <div style={style.chatContainer}>\n      <main className={style.main}>\n        {messages &&\n          messages.map((message) => (\n            <Message key={message.id} message={message} />\n          ))}\n      </main>\n      {/* Send Message Compoenent */}\n      <SendMessage scroll={scroll} />\n      <span ref={scroll}></span>\n    </div>\n  );\n};\n\nexport default Chat;\n"],"mappings":"mSAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,MAAOC,QAAP,KAAoB,WAApB,CACA,MAAOC,YAAP,KAAwB,eAAxB,CACA,OAASC,EAAT,KAAmB,aAAnB,CACA,OAASC,KAAT,CAAgBC,UAAhB,CAA4BC,OAA5B,CAAqCC,UAArC,KAAuD,oBAAvD,C,wFAEA,GAAMC,MAAK,CAAG,CACZC,IAAI,yBADQ,CAEZC,aAAa,CAAE,CACbC,SAAS,CAAE,OADE,CACO;AACpBC,SAAS,CAAE,MAAU;AAFR,CAFH,CAAd,CAQA,GAAMC,KAAI,CAAG,QAAPA,KAAO,EAAM,CACjB,cAAgCf,QAAQ,CAAC,EAAD,CAAxC,wCAAOgB,QAAP,eAAiBC,WAAjB,eACA,GAAMC,OAAM,CAAGhB,MAAM,EAArB,CAEAD,SAAS,CAAC,UAAM,CACd,GAAMkB,EAAC,CAAGb,KAAK,CAACC,UAAU,CAACF,EAAD,CAAK,UAAL,CAAX,CAA6BG,OAAO,CAAC,WAAD,CAApC,CAAf,CACA,GAAMY,YAAW,CAAGX,UAAU,CAACU,CAAD,CAAI,SAACE,aAAD,CAAmB,CACnD,GAAIL,SAAQ,CAAG,EAAf,CACAK,aAAa,CAACC,OAAd,CAAsB,SAACC,GAAD,CAAS,CAC7BP,QAAQ,CAACQ,IAAT,gCAAmBD,GAAG,CAACE,IAAJ,EAAnB,MAA+BC,EAAE,CAAEH,GAAG,CAACG,EAAvC,IACD,CAFD,EAGAT,WAAW,CAACD,QAAD,CAAX,CACD,CAN6B,CAA9B,CAOA,MAAO,kBAAMI,YAAW,EAAjB,EAAP,CACD,CAVQ,CAUN,EAVM,CAAT,CAYA,mBACE,aAAK,KAAK,CAAEV,KAAK,CAACE,aAAlB,wBACE,aAAM,SAAS,CAAEF,KAAK,CAACC,IAAvB,UACGK,QAAQ,EACPA,QAAQ,CAACW,GAAT,CAAa,SAACC,OAAD,qBACX,KAAC,OAAD,EAA0B,OAAO,CAAEA,OAAnC,EAAcA,OAAO,CAACF,EAAtB,CADW,EAAb,CAFJ,EADF,cAQE,KAAC,WAAD,EAAa,MAAM,CAAER,MAArB,EARF,cASE,aAAM,GAAG,CAAEA,MAAX,EATF,GADF,CAaD,CA7BD,CA+BA,cAAeH,KAAf"},"metadata":{},"sourceType":"module"}